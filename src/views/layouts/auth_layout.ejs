<!DOCTYPE html>
<html lang="pt-br" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title><%= title ? (title + ' • Wyvern') : 'Wyvern' %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fontes / CSS base -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/app.css?v=2025-11-05">
</head>
<body class="d-flex align-items-center justify-content-center" style="min-height:100vh;">

  <!-- CONTEÚDO DA PÁGINA -->
  <main class="container" style="max-width:560px;">
    <%- body %>
  </main>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <!-- SDKs do Firebase: carregue APENAS AQUI nas telas de auth -->
  <script>
    // Config pública vinda do servidor
    window.__FIREBASE_CONFIG__ = <%- JSON.stringify(firebasePublic || {}) %>;
  </script>
  <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-auth-compat.js"></script>
  <script>
    (function(){
      // Evita SDK duplicado: só inicializa se ainda não houver app
      if (!firebase.apps.length) {
        firebase.initializeApp(window.__FIREBASE_CONFIG__);
      }
      // Expõe para o auth.js
      window.firebase = firebase;
      window.firebaseAuth = firebase.auth();

      // Estado zerado SEM armazenar sessão no navegador
      window.firebaseAuth.setPersistence(firebase.auth.Auth.Persistence.NONE).catch(()=>{});
      // Garante que qualquer sessão antiga do cliente não interfira
      window.firebaseAuth.signOut().catch(()=>{});
    })();
  </script>

  <!-- Seu JS de auth: usa window.firebase e window.firebaseAuth -->
  <script src="/js/auth.js?v=5"></script>
</body>
</html>
